"use strict";var Di=Object.create;var Ie=Object.defineProperty;var Ni=Object.getOwnPropertyDescriptor;var ji=Object.getOwnPropertyNames;var $i=Object.getPrototypeOf,Bi=Object.prototype.hasOwnProperty;var Gi=(e,t)=>()=>(e&&(t=e(e=0)),t);var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pr=(e,t)=>{for(var r in t)Ie(e,r,{get:t[r],enumerable:!0})},hr=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ji(t))!Bi.call(e,n)&&n!==r&&Ie(e,n,{get:()=>t[n],enumerable:!(s=Ni(t,n))||s.enumerable});return e};var Y=(e,t,r)=>(r=e!=null?Di($i(e)):{},hr(t||!e||!e.__esModule?Ie(r,"default",{value:e,enumerable:!0}):r,e)),mr=e=>hr(Ie({},"__esModule",{value:!0}),e);var vr=ee((Dc,gr)=>{var le=1e3,fe=le*60,de=fe*60,se=de*24,Ui=se*7,qi=se*365.25;gr.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return zi(e);if(r==="number"&&isFinite(e))return t.long?Hi(e):Wi(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function zi(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*qi;case"weeks":case"week":case"w":return r*Ui;case"days":case"day":case"d":return r*se;case"hours":case"hour":case"hrs":case"hr":case"h":return r*de;case"minutes":case"minute":case"mins":case"min":case"m":return r*fe;case"seconds":case"second":case"secs":case"sec":case"s":return r*le;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Wi(e){var t=Math.abs(e);return t>=se?Math.round(e/se)+"d":t>=de?Math.round(e/de)+"h":t>=fe?Math.round(e/fe)+"m":t>=le?Math.round(e/le)+"s":e+"ms"}function Hi(e){var t=Math.abs(e);return t>=se?Le(e,t,se,"day"):t>=de?Le(e,t,de,"hour"):t>=fe?Le(e,t,fe,"minute"):t>=le?Le(e,t,le,"second"):e+" ms"}function Le(e,t,r,s){var n=t>=r*1.5;return Math.round(e/r)+" "+s+(n?"s":"")}});var ht=ee((Nc,yr)=>{function Vi(e){r.debug=r,r.default=r,r.coerce=h,r.disable=a,r.enable=n,r.enabled=o,r.humanize=vr(),r.destroy=d,Object.keys(e).forEach(p=>{r[p]=e[p]}),r.names=[],r.skips=[],r.formatters={};function t(p){let l=0;for(let m=0;m<p.length;m++)l=(l<<5)-l+p.charCodeAt(m),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(p){let l,m=null,f,I;function x(...L){if(!x.enabled)return;let X=x,ue=Number(new Date),lt=ue-(l||ue);X.diff=lt,X.prev=l,X.curr=ue,l=ue,L[0]=r.coerce(L[0]),typeof L[0]!="string"&&L.unshift("%O");let ce=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(we,ft)=>{if(we==="%%")return"%";ce++;let Me=r.formatters[ft];if(typeof Me=="function"){let dt=L[ce];we=Me.call(X,dt),L.splice(ce,1),ce--}return we}),r.formatArgs.call(X,L),(X.log||r.log).apply(X,L)}return x.namespace=p,x.useColors=r.useColors(),x.color=r.selectColor(p),x.extend=s,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(f!==r.namespaces&&(f=r.namespaces,I=r.enabled(p)),I),set:L=>{m=L}}),typeof r.init=="function"&&r.init(x),x}function s(p,l){let m=r(this.namespace+(typeof l>"u"?":":l)+p);return m.log=this.log,m}function n(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let l=(typeof p=="string"?p:"").trim().replace(" ",",").split(",").filter(Boolean);for(let m of l)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function i(p,l){let m=0,f=0,I=-1,x=0;for(;m<p.length;)if(f<l.length&&(l[f]===p[m]||l[f]==="*"))l[f]==="*"?(I=f,x=m,f++):(m++,f++);else if(I!==-1)f=I+1,x++,m=x;else return!1;for(;f<l.length&&l[f]==="*";)f++;return f===l.length}function a(){let p=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),p}function o(p){for(let l of r.skips)if(i(p,l))return!1;for(let l of r.names)if(i(p,l))return!0;return!1}function h(p){return p instanceof Error?p.stack||p.message:p}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}yr.exports=Vi});var wr=ee(($,De)=>{$.formatArgs=Ki;$.save=Qi;$.load=Xi;$.useColors=Yi;$.storage=Ji();$.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();$.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Yi(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ki(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+De.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),e.splice(s,0,t)}$.log=console.debug||console.log||(()=>{});function Qi(e){try{e?$.storage.setItem("debug",e):$.storage.removeItem("debug")}catch{}}function Xi(){let e;try{e=$.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Ji(){try{return localStorage}catch{}}De.exports=ht()($);var{formatters:Zi}=De.exports;Zi.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var br={};pr(br,{createSupportsColor:()=>gt,default:()=>no});function q(e,t=globalThis.Deno?globalThis.Deno.args:je.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return s!==-1&&(n===-1||s<n)}function eo(){if("FORCE_COLOR"in C)return C.FORCE_COLOR==="true"?1:C.FORCE_COLOR==="false"?0:C.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(C.FORCE_COLOR,10),3)}function to(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function ro(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let s=eo();s!==void 0&&(Ne=s);let n=r?Ne:s;if(n===0)return 0;if(r){if(q("color=16m")||q("color=full")||q("color=truecolor"))return 3;if(q("color=256"))return 2}if("TF_BUILD"in C&&"AGENT_NAME"in C)return 1;if(e&&!t&&n===void 0)return 0;let i=n||0;if(C.TERM==="dumb")return i;if(je.default.platform==="win32"){let a=_r.default.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in C)return"GITHUB_ACTIONS"in C||"GITEA_ACTIONS"in C?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(a=>a in C)||C.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in C)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(C.TEAMCITY_VERSION)?1:0;if(C.COLORTERM==="truecolor"||C.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in C){let a=Number.parseInt((C.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(C.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(C.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(C.TERM)||"COLORTERM"in C?1:i}function gt(e,t={}){let r=ro(e,{streamIsTTY:e&&e.isTTY,...t});return to(r)}var je,_r,mt,C,Ne,so,no,kr=Gi(()=>{je=Y(require("node:process"),1),_r=Y(require("node:os"),1),mt=Y(require("node:tty"),1);({env:C}=je.default);q("no-color")||q("no-colors")||q("color=false")||q("color=never")?Ne=0:(q("color")||q("colors")||q("color=true")||q("color=always"))&&(Ne=1);so={stdout:gt({isTTY:mt.default.isatty(1)}),stderr:gt({isTTY:mt.default.isatty(2)})},no=so});var Cr=ee((F,Be)=>{var io=require("tty"),$e=require("util");F.init=po;F.log=co;F.formatArgs=ao;F.save=lo;F.load=fo;F.useColors=oo;F.destroy=$e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");F.colors=[6,2,3,4,5,1];try{let e=(kr(),mr(br));e&&(e.stderr||e).level>=2&&(F.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}F.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),e[r]=s,e},{});function oo(){return"colors"in F.inspectOpts?!!F.inspectOpts.colors:io.isatty(process.stderr.fd)}function ao(e){let{namespace:t,useColors:r}=this;if(r){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(n+"m+"+Be.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=uo()+t+" "+e[0]}function uo(){return F.inspectOpts.hideDate?"":new Date().toISOString()+" "}function co(...e){return process.stderr.write($e.formatWithOptions(F.inspectOpts,...e)+`
`)}function lo(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function fo(){return process.env.DEBUG}function po(e){e.inspectOpts={};let t=Object.keys(F.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=F.inspectOpts[t[r]]}Be.exports=ht()(F);var{formatters:Tr}=Be.exports;Tr.o=function(e){return this.inspectOpts.colors=this.useColors,$e.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Tr.O=function(e){return this.inspectOpts.colors=this.useColors,$e.inspect(e,this.inspectOpts)}});var yt=ee((jc,vt)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vt.exports=wr():vt.exports=Cr()});var Sr=ee(B=>{"use strict";var ho=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0});var mo=require("fs"),go=ho(yt()),pe=go.default("@kwsites/file-exists");function vo(e,t,r){pe("checking %s",e);try{let s=mo.statSync(e);return s.isFile()&&t?(pe("[OK] path represents a file"),!0):s.isDirectory()&&r?(pe("[OK] path represents a directory"),!0):(pe("[FAIL] path represents something other than a file or directory"),!1)}catch(s){if(s.code==="ENOENT")return pe("[FAIL] path is not accessible: %o",s),!1;throw pe("[FATAL] %o",s),s}}function yo(e,t=B.READABLE){return vo(e,(t&B.FILE)>0,(t&B.FOLDER)>0)}B.exists=yo;B.FILE=1;B.FOLDER=2;B.READABLE=B.FILE+B.FOLDER});var Er=ee(Ge=>{"use strict";function wo(e){for(var t in e)Ge.hasOwnProperty(t)||(Ge[t]=e[t])}Object.defineProperty(Ge,"__esModule",{value:!0});wo(Sr())});var _t=ee(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.createDeferred=ne.deferred=void 0;function wt(){let e,t,r="pending";return{promise:new Promise((n,i)=>{e=n,t=i}),done(n){r==="pending"&&(r="resolved",e(n))},fail(n){r==="pending"&&(r="rejected",t(n))},get fulfilled(){return r!=="pending"},get status(){return r}}}ne.deferred=wt;ne.createDeferred=wt;ne.default=wt});var Ic={};pr(Ic,{activate:()=>Ac,deactivate:()=>Mc});module.exports=mr(Ic);var w=Y(require("vscode")),W=Y(require("fs")),ye=Y(require("path"));var et=Y(Er(),1),Qe=Y(yt(),1),Js=require("child_process"),Dn=Y(_t(),1),he=Y(_t(),1),ui=require("node:events"),Je=Object.defineProperty,_o=Object.defineProperties,bo=Object.getOwnPropertyDescriptor,ko=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertyNames,Or=Object.getOwnPropertySymbols,os=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Rr=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))os.call(t,r)&&Rr(e,r,t[r]);if(Or)for(var r of Or(t))To.call(t,r)&&Rr(e,r,t[r]);return e},ke=(e,t)=>_o(e,ko(t)),c=(e,t)=>function(){return e&&(t=(0,e[Bt(e)[0]])(e=0)),t},Co=(e,t)=>function(){return t||(0,e[Bt(e)[0]])((t={exports:{}}).exports,t),t.exports},R=(e,t)=>{for(var r in t)Je(e,r,{get:t[r],enumerable:!0})},So=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Bt(t))!os.call(e,n)&&n!==r&&Je(e,n,{get:()=>t[n],enumerable:!(s=bo(t,n))||s.enumerable});return e},S=e=>So(Je({},"__esModule",{value:!0}),e),be=(e,t,r)=>new Promise((s,n)=>{var i=h=>{try{o(r.next(h))}catch(d){n(d)}},a=h=>{try{o(r.throw(h))}catch(d){n(d)}},o=h=>h.done?s(h.value):Promise.resolve(h.value).then(i,a);o((r=r.apply(e,t)).next())});function Eo(...e){let t=new String(e);return Ze.set(t,e),t}function Ye(e){return e instanceof String&&Ze.has(e)}function Fr(e){return Ze.get(e)||[]}var Ze,Ee=c({"src/lib/args/pathspec.ts"(){"use strict";Ze=new WeakMap}}),Z,re=c({"src/lib/errors/git-error.ts"(){"use strict";Z=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Oe,ge=c({"src/lib/errors/git-response-error.ts"(){"use strict";re(),Oe=class extends Z{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),as,us=c({"src/lib/errors/task-configuration-error.ts"(){"use strict";re(),as=class extends Z{constructor(e){super(void 0,e)}}}});function cs(e){return typeof e=="function"?e:ae}function ls(e){return typeof e=="function"&&e!==ae}function fs(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function ds(e,t=0){return ps(e)&&e.length>t?e[t]:void 0}function oe(e,t=0){if(ps(e)&&e.length>t)return e[e.length-1-t]}function ps(e){return!!(e&&typeof e.length=="number")}function Re(e="",t=!0,r=`
`){return e.split(r).reduce((s,n)=>{let i=t?n.trim():n;return i&&s.push(i),s},[])}function Gt(e,t){return Re(e,!0).map(r=>t(r))}function Ut(e){return(0,et.exists)(e,et.FOLDER)}function b(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function hs(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function tt(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function K(e){return Array.isArray(e)?e:[e]}function ms(e){return e.replace(/[\s-]+(.)/g,(t,r)=>r.toUpperCase())}function gs(e){return K(e).map(String)}function T(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function Te(e,t){let r=[];for(let s=0,n=e.length;s<n;s++)r.push(t,e[s]);return r}function Ce(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function vs(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function Ot(e=0){return new Promise(t=>setTimeout(t,e))}function Rt(e){if(e!==!1)return e}var me,ae,Fe,rt=c({"src/lib/utils/util.ts"(){"use strict";me="\0",ae=()=>{},Fe=Object.prototype.toString.call.bind(Object.prototype.toString)}});function Q(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function qt(e,t){let r=Ye(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function zt(e){return!!e&&Fe(e)==="[object Object]"}function ys(e){return typeof e=="function"}var xe,P,ws,Ke,Wt,_s=c({"src/lib/utils/argument-filters.ts"(){"use strict";rt(),Ee(),xe=e=>Array.isArray(e),P=e=>typeof e=="string",ws=e=>Array.isArray(e)&&e.every(P),Ke=e=>P(e)||Array.isArray(e)&&e.every(P),Wt=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),Ft,Oo=c({"src/lib/utils/exit-codes.ts"(){"use strict";Ft=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(Ft||{})}}),Se,Ro=c({"src/lib/utils/git-output-streams.ts"(){"use strict";Se=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new Se(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),_,te,Fo=c({"src/lib/utils/line-parser.ts"(){"use strict";_=class{constructor(e,t){this.matches=[],this.parse=(r,s)=>(this.resetMatches(),this._regExp.every((n,i)=>this.addMatch(n,i,r(i)))?this.useMatches(s,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let s=r&&e.exec(r);return s&&this.pushMatch(t,s),!!s}pushMatch(e,t){this.matches.push(...t.slice(1))}},te=class extends _{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function bs(...e){let t=process.cwd(),r=Object.assign(z({baseDir:t},ks),...e.filter(s=>typeof s=="object"&&s));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}var ks,xo=c({"src/lib/utils/simple-git-options.ts"(){"use strict";ks={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function Ht(e,t=[]){return zt(e)?Object.keys(e).reduce((r,s)=>{let n=e[s];return Ye(n)?r.push(n):qt(n,["boolean"])?r.push(s+"="+n):r.push(s),r},t):t}function D(e,t=0,r=!1){let s=[];for(let n=0,i=t<0?e.length:t;n<i;n++)"string|number".includes(typeof e[n])&&s.push(String(e[n]));return Ht(Vt(e),s),r||s.push(...Po(e)),s}function Po(e){let t=typeof oe(e)=="function";return Q(oe(e,t?1:0),xe,[])}function Vt(e){let t=ys(oe(e));return Q(oe(e,t?1:0),zt)}function E(e,t=!0){let r=cs(oe(e));return t||ls(r)?r:void 0}var Ao=c({"src/lib/utils/task-options.ts"(){"use strict";_s(),rt(),Ee()}});function xt(e,t){return e(t.stdOut,t.stdErr)}function j(e,t,r,s=!0){return K(r).forEach(n=>{for(let i=Re(n,s),a=0,o=i.length;a<o;a++){let h=(d=0)=>{if(!(a+d>=o))return i[a+d]};t.some(({parse:d})=>d(h,e))}}),e}var Mo=c({"src/lib/utils/task-parser.ts"(){"use strict";rt()}}),Ts={};R(Ts,{ExitCodes:()=>Ft,GitOutputStreams:()=>Se,LineParser:()=>_,NOOP:()=>ae,NULL:()=>me,RemoteLineParser:()=>te,append:()=>b,appendTaskOptions:()=>Ht,asArray:()=>K,asCamelCase:()=>ms,asFunction:()=>cs,asNumber:()=>T,asStringArray:()=>gs,bufferToString:()=>Ce,callTaskParser:()=>xt,createInstanceConfig:()=>bs,delay:()=>Ot,filterArray:()=>xe,filterFunction:()=>ys,filterHasLength:()=>Wt,filterPlainObject:()=>zt,filterPrimitives:()=>qt,filterString:()=>P,filterStringArray:()=>ws,filterStringOrStringArray:()=>Ke,filterType:()=>Q,first:()=>ds,folderExists:()=>Ut,forEachLineWithContent:()=>Gt,getTrailingOptions:()=>D,including:()=>hs,isUserFunction:()=>ls,last:()=>oe,objectToString:()=>Fe,orVoid:()=>Rt,parseStringResponse:()=>j,pick:()=>vs,prefixedArray:()=>Te,remove:()=>tt,splitOn:()=>fs,toLinesWithContent:()=>Re,trailingFunctionArgument:()=>E,trailingOptionsArgument:()=>Vt});var y=c({"src/lib/utils/index.ts"(){"use strict";_s(),Oo(),Ro(),Fo(),xo(),Ao(),Mo(),rt()}}),Cs={};R(Cs,{CheckRepoActions:()=>Pt,checkIsBareRepoTask:()=>Es,checkIsRepoRootTask:()=>Ss,checkIsRepoTask:()=>Io});function Io(e){switch(e){case"bare":return Es();case"root":return Ss()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:st,parser:Yt}}function Ss(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:st,parser(t){return/^\.(git)?$/.test(t.trim())}}}function Es(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:st,parser:Yt}}function Lo(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var Pt,st,Yt,Os=c({"src/lib/tasks/check-is-repo.ts"(){"use strict";y(),Pt=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(Pt||{}),st=({exitCode:e},t,r,s)=>{if(e===128&&Lo(t))return r(Buffer.from("false"));s(t)},Yt=e=>e.trim()==="true"}});function Do(e,t){let r=new Rs(e),s=e?xs:Fs;return Re(t).forEach(n=>{let i=n.replace(s,"");r.paths.push(i),(Ps.test(i)?r.folders:r.files).push(i)}),r}var Rs,Fs,xs,Ps,No=c({"src/lib/responses/CleanSummary.ts"(){"use strict";y(),Rs=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},Fs=/^[a-z]+\s*/i,xs=/^[a-z]+\s+[a-z]+\s*/i,Ps=/\/$/}}),At={};R(At,{EMPTY_COMMANDS:()=>nt,adhocExecTask:()=>As,configurationErrorTask:()=>N,isBufferTask:()=>Is,isEmptyTask:()=>Ls,straightThroughBufferTask:()=>Ms,straightThroughStringTask:()=>M});function As(e){return{commands:nt,format:"empty",parser:e}}function N(e){return{commands:nt,format:"empty",parser(){throw typeof e=="string"?new as(e):e}}}function M(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function Ms(e){return{commands:e,format:"buffer",parser(t){return t}}}function Is(e){return e.format==="buffer"}function Ls(e){return e.format==="empty"||!e.commands.length}var nt,O=c({"src/lib/tasks/task.ts"(){"use strict";us(),nt=[]}}),Ds={};R(Ds,{CONFIG_ERROR_INTERACTIVE_MODE:()=>Kt,CONFIG_ERROR_MODE_REQUIRED:()=>Qt,CONFIG_ERROR_UNKNOWN_OPTION:()=>Xt,CleanOptions:()=>ze,cleanTask:()=>Ns,cleanWithOptionsTask:()=>jo,isCleanOptionsArray:()=>$o});function jo(e,t){let{cleanMode:r,options:s,valid:n}=Bo(e);return r?n.options?(s.push(...t),s.some(qo)?N(Kt):Ns(r,s)):N(Xt+JSON.stringify(e)):N(Qt)}function Ns(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(s){return Do(e==="n",s)}}}function $o(e){return Array.isArray(e)&&e.every(t=>Jt.has(t))}function Bo(e){let t,r=[],s={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(n=>{Go(n)?(t=n,s.cleanMode=!0):s.options=s.options&&Uo(r[r.length]=`-${n}`)}),{cleanMode:t,options:r,valid:s}}function Go(e){return e==="f"||e==="n"}function Uo(e){return/^-[a-z]$/i.test(e)&&Jt.has(e.charAt(1))}function qo(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var Kt,Qt,Xt,ze,Jt,js=c({"src/lib/tasks/clean.ts"(){"use strict";No(),y(),O(),Kt="Git clean interactive mode is not supported",Qt='Git clean mode parameter ("n" or "f") is required',Xt="Git clean unknown option found in: ",ze=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(ze||{}),Jt=new Set(["i",...gs(Object.values(ze))])}});function zo(e){let t=new Bs;for(let r of $s(e))t.addValue(r.file,String(r.key),r.value);return t}function Wo(e,t){let r=null,s=[],n=new Map;for(let i of $s(e,t))i.key===t&&(s.push(r=i.value),n.has(i.file)||n.set(i.file,[]),n.get(i.file).push(r));return{key:t,paths:Array.from(n.keys()),scopes:n,value:r,values:s}}function Ho(e){return e.replace(/^(file):/,"")}function*$s(e,t=null){let r=e.split("\0");for(let s=0,n=r.length-1;s<n;){let i=Ho(r[s++]),a=r[s++],o=t;if(a.includes(`
`)){let h=fs(a,`
`);o=h[0],a=h[1]}yield{file:i,key:o,value:a}}}var Bs,Vo=c({"src/lib/responses/ConfigList.ts"(){"use strict";y(),Bs=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=oe(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let s=this.addFile(e);s.hasOwnProperty(t)?Array.isArray(s[t])?s[t].push(r):s[t]=[s[t],r]:s[t]=r,this._all=void 0}}}});function bt(e,t){return typeof e=="string"&&Mt.hasOwnProperty(e)?e:t}function Yo(e,t,r,s){let n=["config",`--${s}`];return r&&n.push("--add"),n.push(e,t),{commands:n,format:"utf-8",parser(i){return i}}}function Ko(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(s){return Wo(s,e)}}}function Qo(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return zo(r)}}}function Xo(){return{addConfig(e,t,...r){return this._runTask(Yo(e,t,r[0]===!0,bt(r[1],"local")),E(arguments))},getConfig(e,t){return this._runTask(Ko(e,bt(t,void 0)),E(arguments))},listConfig(...e){return this._runTask(Qo(bt(e[0],void 0)),E(arguments))}}}var Mt,Gs=c({"src/lib/tasks/config.ts"(){"use strict";Vo(),y(),Mt=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(Mt||{})}});function Jo(e){return Us.has(e)}var kt,Us,qs=c({"src/lib/tasks/diff-name-status.ts"(){"use strict";kt=(e=>(e.ADDED="A",e.COPIED="C",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.CHANGED="T",e.UNMERGED="U",e.UNKNOWN="X",e.BROKEN="B",e))(kt||{}),Us=new Set(Object.values(kt))}});function Zo(...e){return new Ws().param(...e)}function ea(e){let t=new Set,r={};return Gt(e,s=>{let[n,i,a]=s.split(me);t.add(n),(r[n]=r[n]||[]).push({line:T(i),path:n,preview:a})}),{paths:t,results:r}}function ta(){return{grep(e){let t=E(arguments),r=D(arguments);for(let n of zs)if(r.includes(n))return this._runTask(N(`git.grep: use of "${n}" is not supported.`),t);typeof e=="string"&&(e=Zo().param(e));let s=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:s,format:"utf-8",parser(n){return ea(n)}},t)}}}var zs,_e,xr,Ws,Hs=c({"src/lib/tasks/grep.ts"(){"use strict";y(),O(),zs=["-h"],_e=Symbol("grepQuery"),Ws=class{constructor(){this[xr]=[]}*[(xr=_e,Symbol.iterator)](){for(let e of this[_e])yield e}and(...e){return e.length&&this[_e].push("--and","(",...Te(e,"-e"),")"),this}param(...e){return this[_e].push(...Te(e,"-e")),this}}}}),Vs={};R(Vs,{ResetMode:()=>We,getResetMode:()=>sa,resetTask:()=>ra});function ra(e,t){let r=["reset"];return Ys(e)&&r.push(`--${e}`),r.push(...t),M(r)}function sa(e){if(Ys(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function Ys(e){return Ks.includes(e)}var We,Ks,Qs=c({"src/lib/tasks/reset.ts"(){"use strict";O(),We=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(We||{}),Ks=Array.from(Object.values(We))}});function na(){return(0,Qe.default)("simple-git")}function Pr(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(s,...n)=>{e(s,...n),r(s,...n)}:e:(s,...n)=>{e(`%s ${s}`,t,...n),r&&r(s,...n)}}function ia(e,t,{namespace:r}){if(typeof e=="string")return e;let s=t&&t.namespace||"";return s.startsWith(r)?s.substr(r.length+1):s||r}function Zt(e,t,r,s=na()){let n=e&&`[${e}]`||"",i=[],a=typeof t=="string"?s.extend(t):t,o=ia(Q(t,P),a,s);return d(r);function h(p,l){return b(i,Zt(e,o.replace(/^[^:]+/,p),l,s))}function d(p){let l=p&&`[${p}]`||"",m=a&&Pr(a,l)||ae,f=Pr(s,`${n} ${l}`,m);return Object.assign(a?m:f,{label:e,sibling:h,info:f,step:d})}}var Xs=c({"src/lib/git-logger.ts"(){"use strict";y(),Qe.default.formatters.L=e=>String(Wt(e)?e.length:"-"),Qe.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Fe(e)}}),Ue,It,oa=c({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";re(),Xs(),Ue=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=Ue.getName(e.commands[0]),r=Zt(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new Z(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++Ue.counter}`}},It=Ue,It.counter=0}});function ie(e,t){return{method:ds(e.commands)||"",commands:t}}function aa(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function Ar(e,t,r,s){return n=>{r("%s received %L bytes",t,n),s("%B",n),e.push(n)}}var Lt,ua=c({"src/lib/runners/git-executor-chain.ts"(){"use strict";re(),O(),y(),oa(),Lt=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new It}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return be(this,null,function*(){let t=yield this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:s}=this._queue.attempt(e);return yield Ls(e)?this.attemptEmptyTask(e,s):this.attemptRemoteTask(e,s)}catch(s){throw this.onFatalException(e,s)}finally{r(),t()}})}onFatalException(e,t){let r=t instanceof Z?Object.assign(t,{task:e}):new Z(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return be(this,null,function*(){let r=this._plugins.exec("spawn.binary","",ie(e,e.commands)),s=this._plugins.exec("spawn.args",[...e.commands],ie(e,e.commands)),n=yield this.gitResponse(e,r,s,this.outputHandler,t.step("SPAWN")),i=yield this.handleTaskData(e,s,n,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),Is(e)?xt(e.parser,i):xt(e.parser,i.asStrings())})}attemptEmptyTask(e,t){return be(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,r,s){let{exitCode:n,rejection:i,stdOut:a,stdErr:o}=r;return new Promise((h,d)=>{s("Preparing to handle process response exitCode=%d stdOut=",n);let{error:p}=this._plugins.exec("task.error",{error:i},z(z({},ie(e,t)),r));if(p&&e.onError)return s.info("exitCode=%s handling with custom error handler"),e.onError(r,p,l=>{s.info("custom error handler treated as success"),s("custom error returned a %s",Fe(l)),h(new Se(Array.isArray(l)?Buffer.concat(l):l,Buffer.concat(o)))},d);if(p)return s.info("handling as error: exitCode=%s stdErr=%s rejection=%o",n,o.length,i),d(p);s.info("retrieving task output complete"),h(new Se(Buffer.concat(a),Buffer.concat(o)))})}gitResponse(e,t,r,s,n){return be(this,null,function*(){let i=n.sibling("output"),a=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},ie(e,e.commands));return new Promise(o=>{let h=[],d=[];n.info("%s %o",t,r),n("%O",a);let p=this._beforeSpawn(e,r);if(p)return o({stdOut:h,stdErr:d,exitCode:9901,rejection:p});this._plugins.exec("spawn.before",void 0,ke(z({},ie(e,r)),{kill(m){p=m||p}}));let l=(0,Js.spawn)(t,r,a);l.stdout.on("data",Ar(h,"stdOut",n,i.step("stdOut"))),l.stderr.on("data",Ar(d,"stdErr",n,i.step("stdErr"))),l.on("error",aa(d,n)),s&&(n("Passing child process stdOut/stdErr to custom outputHandler"),s(t,l.stdout,l.stderr,[...r])),this._plugins.exec("spawn.after",void 0,ke(z({},ie(e,r)),{spawned:l,close(m,f){o({stdOut:h,stdErr:d,exitCode:m,rejection:p||f})},kill(m){l.killed||(p=m,l.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,ke(z({},ie(e,t)),{kill(s){r=s||r}})),r}}}}),Zs={};R(Zs,{GitExecutor:()=>en});var en,ca=c({"src/lib/runners/git-executor.ts"(){"use strict";ua(),en=class{constructor(e,t,r){this.cwd=e,this._scheduler=t,this._plugins=r,this._chain=new Lt(this,this._scheduler,this._plugins)}chain(){return new Lt(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function la(e,t,r=ae){let s=i=>{r(null,i)},n=i=>{i?.task===e&&r(i instanceof Oe?fa(i):i,void 0)};t.then(s,n)}function fa(e){let t=s=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${s} should be GitResponseError.git.${s}, this will no longer be available in version 3`),t=ae};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(s,n){return n in e||(s[n]={enumerable:!1,configurable:!1,get(){return t(n),e.git[n]}}),s}}var da=c({"src/lib/task-callback.ts"(){"use strict";ge(),y()}});function Mr(e,t){return As(r=>{if(!Ut(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}var pa=c({"src/lib/tasks/change-working-directory.ts"(){"use strict";y(),O()}});function Tt(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=tt(t,"-B")),M(t)}function ha(){return{checkout(){return this._runTask(Tt(D(arguments,1)),E(arguments))},checkoutBranch(e,t){return this._runTask(Tt(["-b",e,t,...D(arguments)]),E(arguments))},checkoutLocalBranch(e){return this._runTask(Tt(["-b",e,...D(arguments)]),E(arguments))}}}var ma=c({"src/lib/tasks/checkout.ts"(){"use strict";y(),O()}});function ga(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function va(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(e){return j(ga(),[tn],e)}})}}}var tn,ya=c({"src/lib/tasks/count-objects.ts"(){"use strict";y(),tn=new _(/([a-z-]+): (\d+)$/,(e,[t,r])=>{let s=ms(t);e.hasOwnProperty(s)&&(e[s]=T(r))})}});function wa(e){return j({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},rn,e)}var rn,_a=c({"src/lib/parsers/parse-commit.ts"(){"use strict";y(),rn=[new _(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,s])=>{e.branch=t,e.commit=s,e.root=!!r}),new _(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),s=r.pop();!s||!s.includes("@")||(e.author={email:s.substr(0,s.length-1),name:r.join("<").trim()})}),new _(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(s,10)||0}),new _(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0;let n=parseInt(r,10)||0;s==="-"?e.summary.deletions=n:s==="+"&&(e.summary.insertions=n)})]}});function ba(e,t,r){return{commands:["-c","core.abbrev=40","commit",...Te(e,"-m"),...t,...r],format:"utf-8",parser:wa}}function ka(){return{commit(t,...r){let s=E(arguments),n=e(t)||ba(K(t),K(Q(r[0],Ke,[])),[...Q(r[1],xe,[]),...D(arguments,0,!0)]);return this._runTask(n,s)}};function e(t){return!Ke(t)&&N("git.commit: requires the commit message to be supplied as a string/string[]")}}var Ta=c({"src/lib/tasks/commit.ts"(){"use strict";_a(),y(),O()}});function Ca(){return{firstCommit(){return this._runTask(M(["rev-list","--max-parents=0","HEAD"],!0),E(arguments))}}}var Sa=c({"src/lib/tasks/first-commit.ts"(){"use strict";y(),O()}});function Ea(e,t){let r=["hash-object",e];return t&&r.push("-w"),M(r,!0)}var Oa=c({"src/lib/tasks/hash-object.ts"(){"use strict";O()}});function Ra(e,t,r){let s=String(r).trim(),n;if(n=sn.exec(s))return new He(e,t,!1,n[1]);if(n=nn.exec(s))return new He(e,t,!0,n[1]);let i="",a=s.split(" ");for(;a.length;)if(a.shift()==="in"){i=a.join(" ");break}return new He(e,t,/^re/i.test(s),i)}var He,sn,nn,Fa=c({"src/lib/responses/InitSummary.ts"(){"use strict";He=class{constructor(e,t,r,s){this.bare=e,this.path=t,this.existing=r,this.gitDir=s}},sn=/^Init.+ repository in (.+)$/,nn=/^Rein.+ in (.+)$/}});function xa(e){return e.includes(er)}function Pa(e=!1,t,r){let s=["init",...r];return e&&!xa(s)&&s.splice(1,0,er),{commands:s,format:"utf-8",parser(n){return Ra(s.includes("--bare"),t,n)}}}var er,Aa=c({"src/lib/tasks/init.ts"(){"use strict";Fa(),er="--bare"}});function tr(e){for(let t=0;t<e.length;t++){let r=rr.exec(e[t]);if(r)return`--${r[1]}`}return""}function Ma(e){return rr.test(e)}var rr,Pe=c({"src/lib/args/log-format.ts"(){"use strict";rr=/^--(stat|numstat|name-only|name-status)(=|$)/}}),on,Ia=c({"src/lib/responses/DiffSummary.ts"(){"use strict";on=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function an(e=""){let t=un[e];return r=>j(new on,t,r,!1)}var Ct,Ir,Lr,Dr,un,cn=c({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";Pe(),Ia(),qs(),y(),Ct=[new _(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,s=""])=>{e.files.push({file:t.trim(),changes:T(r),insertions:s.replace(/[^+]/g,"").length,deletions:s.replace(/[^-]/g,"").length,binary:!1})}),new _(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,s])=>{e.files.push({file:t.trim(),before:T(r),after:T(s),binary:!0})}),new _(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let s=/(\d+) i/.exec(r),n=/(\d+) d/.exec(r);e.changed=T(t),e.insertions=T(s?.[1]),e.deletions=T(n?.[1])})],Ir=[new _(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,s])=>{let n=T(t),i=T(r);e.changed++,e.insertions+=n,e.deletions+=i,e.files.push({file:s,changes:n+i,insertions:n,deletions:i,binary:!1})}),new _(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],Lr=[new _(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],Dr=[new _(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(e,[t,r,s,n,i])=>{e.changed++,e.files.push({file:i??s,changes:0,insertions:0,deletions:0,binary:!1,status:Rt(Jo(t)&&t),from:Rt(!!i&&s!==i&&s),similarity:T(r)})})],un={"":Ct,"--stat":Ct,"--numstat":Ir,"--name-status":Dr,"--name-only":Lr}}});function La(e,t){return t.reduce((r,s,n)=>(r[s]=e[n]||"",r),Object.create({diff:null}))}function ln(e=ir,t=fn,r=""){let s=an(r);return function(n){let i=Re(n.trim(),!1,sr).map(function(a){let o=a.split(nr),h=La(o[0].split(e),t);return o.length>1&&o[1].trim()&&(h.diff=s(o[1])),h});return{all:i,latest:i.length&&i[0]||null,total:i.length}}}var sr,nr,ir,fn,dn=c({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";y(),cn(),Pe(),sr="\xF2\xF2\xF2\xF2\xF2\xF2 ",nr=" \xF2\xF2",ir=" \xF2 ",fn=["hash","date","message","refs","author_name","author_email"]}}),pn={};R(pn,{diffSummaryTask:()=>Da,validateLogFormatConfig:()=>it});function Da(e){let t=tr(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),it(r)||{commands:r,format:"utf-8",parser:an(t)}}function it(e){let t=e.filter(Ma);if(t.length>1)return N(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return N(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var or=c({"src/lib/tasks/diff.ts"(){"use strict";Pe(),cn(),O()}});function Na(e,t){let r=[],s=[];return Object.keys(e).forEach(n=>{r.push(n),s.push(String(e[n]))}),[r,s.join(t)]}function ja(e){return Object.keys(e).reduce((t,r)=>(r in Dt||(t[r]=e[r]),t),{})}function hn(e={},t=[]){let r=Q(e.splitter,P,ir),s=!qt(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[n,i]=Na(s,r),a=[],o=[`--pretty=format:${sr}${i}${nr}`,...t],h=e.n||e["max-count"]||e.maxCount;if(h&&o.push(`--max-count=${h}`),e.from||e.to){let d=e.symmetric!==!1?"...":"..";a.push(`${e.from||""}${d}${e.to||""}`)}return P(e.file)&&o.push("--follow",Eo(e.file)),Ht(ja(e),o),{fields:n,splitter:r,commands:[...o,...a]}}function $a(e,t,r){let s=ln(e,t,tr(r));return{commands:["log",...r],format:"utf-8",parser:s}}function Ba(){return{log(...r){let s=E(arguments),n=hn(Vt(arguments),Q(arguments[0],xe)),i=t(...r)||it(n.commands)||e(n);return this._runTask(i,s)}};function e(r){return $a(r.splitter,r.fields,r.commands)}function t(r,s){return P(r)&&P(s)&&N("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var Dt,mn=c({"src/lib/tasks/log.ts"(){"use strict";Pe(),Ee(),dn(),y(),O(),or(),Dt=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(Dt||{})}}),Ve,gn,Ga=c({"src/lib/responses/MergeSummary.ts"(){"use strict";Ve=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},gn=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Nt,vn,Ua=c({"src/lib/responses/PullSummary.ts"(){"use strict";Nt=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},vn=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function St(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Nr(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:T(t&&t[1]||"0"),delta:T(r&&r[1]||"0")}}var yn,qa=c({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";y(),yn=[new te(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let s=t.toLowerCase(),n=St(e.remoteMessages);Object.assign(n,{[s]:T(r)})}),new te(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let s=t.toLowerCase(),n=St(e.remoteMessages);Object.assign(n,{[s]:T(r)})}),new te(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,s])=>{let n=St(e.remoteMessages);n.total=Nr(t),n.reused=Nr(r),n.packReused=T(s)})]}});function wn(e,t){return j({remoteMessages:new bn},_n,t)}var _n,bn,kn=c({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";y(),qa(),_n=[new te(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...yn,new te([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new te([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,s])=>{e.remoteMessages.vulnerabilities={count:T(t),summary:r,url:s}})],bn=class{constructor(){this.all=[]}}}});function za(e,t){let r=j(new vn,Tn,[e,t]);return r.message&&r}var jr,$r,Br,Gr,Tn,Ur,ar,Cn=c({"src/lib/parsers/parse-pull.ts"(){"use strict";Ua(),y(),kn(),jr=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,$r=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Br=/^(create|delete) mode \d+ (.+)/,Gr=[new _(jr,(e,[t,r,s])=>{e.files.push(t),r&&(e.insertions[t]=r.length),s&&(e.deletions[t]=s.length)}),new _($r,(e,[t,,r,,s])=>r!==void 0||s!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+s||0,!0):!1),new _(Br,(e,[t,r])=>{b(e.files,r),b(t==="create"?e.created:e.deleted,r)})],Tn=[new _(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new _(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new _(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,s,n])=>{e.branch.local=s,e.hash.local=t,e.branch.remote=n,e.hash.remote=r})],Ur=(e,t)=>j(new Nt,Gr,[e,t]),ar=(e,t)=>Object.assign(new Nt,Ur(e,t),wn(e,t))}}),qr,Sn,zr,Wa=c({"src/lib/parsers/parse-merge.ts"(){"use strict";Ga(),y(),Cn(),qr=[new _(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new _(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new Ve(t,r))}),new _(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,s])=>{e.conflicts.push(new Ve(t,r,{deleteRef:s}))}),new _(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new Ve(t,null))}),new _(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],Sn=(e,t)=>Object.assign(zr(e,t),ar(e,t)),zr=e=>j(new gn,qr,e)}});function Wr(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let s=Sn(t,r);if(s.failed)throw new Oe(s);return s}}:N("Git.merge requires at least one option")}var Ha=c({"src/lib/tasks/merge.ts"(){"use strict";ge(),Wa(),O()}});function Va(e,t,r){let s=r.includes("deleted"),n=r.includes("tag")||/^refs\/tags/.test(e),i=!r.includes("new");return{deleted:s,tag:n,branch:!n,new:!i,alreadyUpdated:i,local:e,remote:t}}var Hr,En,Vr,Ya=c({"src/lib/parsers/parse-push.ts"(){"use strict";y(),kn(),Hr=[new _(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new _(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=ke(z({},e.ref||{}),{local:t})}),new _(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,s])=>{e.pushed.push(Va(t,r,s))}),new _(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,s])=>{e.branch=ke(z({},e.branch||{}),{local:t,remote:r,remoteName:s})}),new _(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,s,n])=>{e.update={head:{local:t,remote:r},hash:{from:s,to:n}}})],En=(e,t)=>{let r=Vr(e,t),s=wn(e,t);return z(z({},r),s)},Vr=(e,t)=>j({pushed:[]},Hr,[e,t])}}),On={};R(On,{pushTagsTask:()=>Ka,pushTask:()=>ur});function Ka(e={},t){return b(t,"--tags"),ur(e,t)}function ur(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),tt(r,"-v"),b(r,"--verbose"),b(r,"--porcelain"),{commands:r,format:"utf-8",parser:En}}var Rn=c({"src/lib/tasks/push.ts"(){"use strict";Ya(),y()}});function Qa(){return{showBuffer(){let e=["show",...D(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(Ms(e),E(arguments))},show(){let e=["show",...D(arguments,1)];return this._runTask(M(e),E(arguments))}}}var Xa=c({"src/lib/tasks/show.ts"(){"use strict";y(),O()}}),Yr,Fn,Ja=c({"src/lib/responses/FileStatusSummary.ts"(){"use strict";Yr=/^(.+)\0(.+)$/,Fn=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t==="R"||r==="R"){let s=Yr.exec(e)||[null,e,e];this.from=s[2]||"",this.path=s[1]||""}}}}});function Kr(e){let[t,r]=e.split(me);return{from:r||t,to:t}}function G(e,t,r){return[`${e}${t}`,r]}function Et(e,...t){return t.map(r=>G(e,r,(s,n)=>b(s.conflicted,n)))}function Za(e,t){let r=t.trim();switch(" "){case r.charAt(2):return s(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return s(" ",r.charAt(0),r.substr(2));default:return}function s(n,i,a){let o=`${n}${i}`,h=xn.get(o);h&&h(e,a),o!=="##"&&o!=="!!"&&e.files.push(new Fn(a,n,i))}}var Qr,xn,Pn,eu=c({"src/lib/responses/StatusSummary.ts"(){"use strict";y(),Ja(),Qr=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},xn=new Map([G(" ","A",(e,t)=>b(e.created,t)),G(" ","D",(e,t)=>b(e.deleted,t)),G(" ","M",(e,t)=>b(e.modified,t)),G("A"," ",(e,t)=>b(e.created,t)&&b(e.staged,t)),G("A","M",(e,t)=>b(e.created,t)&&b(e.staged,t)&&b(e.modified,t)),G("D"," ",(e,t)=>b(e.deleted,t)&&b(e.staged,t)),G("M"," ",(e,t)=>b(e.modified,t)&&b(e.staged,t)),G("M","M",(e,t)=>b(e.modified,t)&&b(e.staged,t)),G("R"," ",(e,t)=>{b(e.renamed,Kr(t))}),G("R","M",(e,t)=>{let r=Kr(t);b(e.renamed,r),b(e.modified,r.to)}),G("!","!",(e,t)=>{b(e.ignored=e.ignored||[],t)}),G("?","?",(e,t)=>b(e.not_added,t)),...Et("A","A","U"),...Et("D","D","U"),...Et("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,s=/behind (\d+)/,n=/^(.+?(?=(?:\.{3}|\s|$)))/,i=/\.{3}(\S*)/,a=/\son\s([\S]+)$/,o;o=r.exec(t),e.ahead=o&&+o[1]||0,o=s.exec(t),e.behind=o&&+o[1]||0,o=n.exec(t),e.current=o&&o[1],o=i.exec(t),e.tracking=o&&o[1],o=a.exec(t),e.current=o&&o[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),Pn=function(e){let t=e.split(me),r=new Qr;for(let s=0,n=t.length;s<n;){let i=t[s++].trim();i&&(i.charAt(0)==="R"&&(i+=me+(t[s++]||"")),Za(r,i))}return r}}});function tu(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(r=>!An.includes(r))],parser(r){return Pn(r)}}}var An,ru=c({"src/lib/tasks/status.ts"(){"use strict";eu(),An=["--null","-z"]}});function Xe(e=0,t=0,r=0,s="",n=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:s,installed:n},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function su(){return Xe(0,0,0,"",!1)}function nu(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:iu,onError(e,t,r,s){if(e.exitCode===-2)return r(Buffer.from(cr));s(t)}})}}}function iu(e){return e===cr?su():j(Xe(0,0,0,e),Mn,e)}var cr,Mn,ou=c({"src/lib/tasks/version.ts"(){"use strict";y(),cr="installed=false",Mn=[new _(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,s,n=""])=>{Object.assign(e,Xe(T(t),T(r),T(s),n))}),new _(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,s,n=""])=>{Object.assign(e,Xe(T(t),T(r),s,n))})]}}),In={};R(In,{SimpleGitApi:()=>jt});var jt,au=c({"src/lib/simple-git-api.ts"(){"use strict";da(),pa(),ma(),ya(),Ta(),Gs(),Sa(),Hs(),Oa(),Aa(),mn(),Ha(),Rn(),Xa(),ru(),O(),ou(),y(),jt=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),s=r.push(e);return t&&la(e,s,t),Object.create(this,{then:{value:s.then.bind(s)},catch:{value:s.catch.bind(s)},_executor:{value:r}})}add(e){return this._runTask(M(["add",...K(e)]),E(arguments))}cwd(e){let t=E(arguments);return typeof e=="string"?this._runTask(Mr(e,this._executor),t):typeof e?.path=="string"?this._runTask(Mr(e.path,e.root&&this._executor||void 0),t):this._runTask(N("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(Ea(e,t===!0),E(arguments))}init(e){return this._runTask(Pa(e===!0,this._executor.cwd,D(arguments)),E(arguments))}merge(){return this._runTask(Wr(D(arguments)),E(arguments))}mergeFromTo(e,t){return P(e)&&P(t)?this._runTask(Wr([e,t,...D(arguments)]),E(arguments,!1)):this._runTask(N("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=ur({remote:Q(arguments[0],P),branch:Q(arguments[1],P)},D(arguments));return this._runTask(e,E(arguments))}stash(){return this._runTask(M(["stash",...D(arguments)]),E(arguments))}status(){return this._runTask(tu(D(arguments)),E(arguments))}},Object.assign(jt.prototype,ha(),ka(),Xo(),va(),Ca(),ta(),Ba(),Qa(),nu())}}),Ln={};R(Ln,{Scheduler:()=>Nn});var Xr,Nn,uu=c({"src/lib/runners/scheduler.ts"(){"use strict";y(),Xs(),Xr=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,Dn.createDeferred)();return{promise:t,done:r,id:e}}})(),Nn=class{constructor(e=2){this.concurrency=e,this.logger=Zt("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=b(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),tt(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=b(this.pending,Xr());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),jn={};R(jn,{applyPatchTask:()=>cu});function cu(e,t){return M(["apply",...t,...e])}var lu=c({"src/lib/tasks/apply-patch.ts"(){"use strict";O()}});function fu(e,t){return{branch:e,hash:t,success:!0}}function du(e){return{branch:e,hash:null,success:!1}}var $n,pu=c({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";$n=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function Bn(e,t){return t===1&&$t.test(e)}var Jr,$t,Zr,ot,hu=c({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";pu(),y(),Jr=/(\S+)\s+\(\S+\s([^)]+)\)/,$t=/^error[^']+'([^']+)'/m,Zr=[new _(Jr,(e,[t,r])=>{let s=fu(t,r);e.all.push(s),e.branches[t]=s}),new _($t,(e,[t])=>{let r=du(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],ot=(e,t)=>j(new $n,Zr,[e,t])}}),Gn,mu=c({"src/lib/responses/BranchSummary.ts"(){"use strict";Gn=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,s,n){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:s,label:n}}}}});function es(e){return e?e.charAt(0):""}function Un(e){return j(new Gn,qn,e)}var qn,gu=c({"src/lib/parsers/parse-branch.ts"(){"use strict";mu(),y(),qn=[new _(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,s,n])=>{e.push(es(t),!0,r,s,n)}),new _(new RegExp("^([*+]\\s)?(\\S+)\\s+([a-z0-9]+)\\s?(.*)$","s"),(e,[t,r,s,n])=>{e.push(es(t),!1,r,s,n)})]}}),zn={};R(zn,{branchLocalTask:()=>yu,branchTask:()=>vu,containsDeleteBranchCommand:()=>Wn,deleteBranchTask:()=>_u,deleteBranchesTask:()=>wu});function Wn(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function vu(e){let t=Wn(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(s,n){return t?ot(s,n).all[0]:Un(s)}}}function yu(){return{format:"utf-8",commands:["branch","-v"],parser:Un}}function wu(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,s){return ot(r,s)},onError({exitCode:r,stdOut:s},n,i,a){if(!Bn(String(n),r))return a(n);i(s)}}}function _u(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(s,n){return ot(s,n).branches[e]},onError({exitCode:s,stdErr:n,stdOut:i},a,o,h){if(!Bn(String(a),s))return h(a);throw new Oe(r.parser(Ce(i),Ce(n)),String(a))}};return r}var bu=c({"src/lib/tasks/branch.ts"(){"use strict";ge(),hu(),gu(),y()}}),Hn,ku=c({"src/lib/responses/CheckIgnore.ts"(){"use strict";Hn=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),Vn={};R(Vn,{checkIgnoreTask:()=>Tu});function Tu(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Hn}}var Cu=c({"src/lib/tasks/check-ignore.ts"(){"use strict";ku()}}),Yn={};R(Yn,{cloneMirrorTask:()=>Eu,cloneTask:()=>Kn});function Su(e){return/^--upload-pack(=|$)/.test(e)}function Kn(e,t,r){let s=["clone",...r];return P(e)&&s.push(e),P(t)&&s.push(t),s.find(Su)?N("git.fetch: potential exploit argument blocked."):M(s)}function Eu(e,t,r){return b(r,"--mirror"),Kn(e,t,r)}var Ou=c({"src/lib/tasks/clone.ts"(){"use strict";O(),y()}});function Ru(e,t){return j({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},Qn,[e,t])}var Qn,Fu=c({"src/lib/parsers/parse-fetch.ts"(){"use strict";y(),Qn=[new _(/From (.+)$/,(e,[t])=>{e.remote=t}),new _(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new _(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new _(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new _(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,s,n])=>{e.updated.push({name:s,tracking:n,to:r,from:t})})]}}),Xn={};R(Xn,{fetchTask:()=>Pu});function xu(e){return/^--upload-pack(=|$)/.test(e)}function Pu(e,t,r){let s=["fetch",...r];return e&&t&&s.push(e,t),s.find(xu)?N("git.fetch: potential exploit argument blocked."):{commands:s,format:"utf-8",parser:Ru}}var Au=c({"src/lib/tasks/fetch.ts"(){"use strict";Fu(),O()}});function Mu(e){return j({moves:[]},Jn,e)}var Jn,Iu=c({"src/lib/parsers/parse-move.ts"(){"use strict";y(),Jn=[new _(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),Zn={};R(Zn,{moveTask:()=>Lu});function Lu(e,t){return{commands:["mv","-v",...K(e),t],format:"utf-8",parser:Mu}}var Du=c({"src/lib/tasks/move.ts"(){"use strict";Iu(),y()}}),ei={};R(ei,{pullTask:()=>Nu});function Nu(e,t,r){let s=["pull",...r];return e&&t&&s.splice(1,0,e,t),{commands:s,format:"utf-8",parser(n,i){return ar(n,i)},onError(n,i,a,o){let h=za(Ce(n.stdOut),Ce(n.stdErr));if(h)return o(new Oe(h));o(i)}}}var ju=c({"src/lib/tasks/pull.ts"(){"use strict";ge(),Cn(),y()}});function $u(e){let t={};return ti(e,([r])=>t[r]={name:r}),Object.values(t)}function Bu(e){let t={};return ti(e,([r,s,n])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),n&&s&&(t[r].refs[n.replace(/[^a-z]/g,"")]=s)}),Object.values(t)}function ti(e,t){Gt(e,r=>t(r.split(/\s+/)))}var Gu=c({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";y()}}),ri={};R(ri,{addRemoteTask:()=>Uu,getRemotesTask:()=>qu,listRemotesTask:()=>zu,remoteTask:()=>Wu,removeRemoteTask:()=>Hu});function Uu(e,t,r){return M(["remote","add",...r,e,t])}function qu(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?Bu:$u}}function zu(e){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),M(t)}function Wu(e){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),M(t)}function Hu(e){return M(["remote","remove",e])}var Vu=c({"src/lib/tasks/remote.ts"(){"use strict";Gu(),O()}}),si={};R(si,{stashListTask:()=>Yu});function Yu(e={},t){let r=hn(e),s=["stash","list",...r.commands,...t],n=ln(r.splitter,r.fields,tr(s));return it(s)||{commands:s,format:"utf-8",parser:n}}var Ku=c({"src/lib/tasks/stash-list.ts"(){"use strict";Pe(),dn(),or(),mn()}}),ni={};R(ni,{addSubModuleTask:()=>Qu,initSubModuleTask:()=>Xu,subModuleTask:()=>at,updateSubModuleTask:()=>Ju});function Qu(e,t){return at(["add",e,t])}function Xu(e){return at(["init",...e])}function at(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),M(t)}function Ju(e){return at(["update",...e])}var Zu=c({"src/lib/tasks/sub-module.ts"(){"use strict";O()}});function ec(e,t){let r=isNaN(e),s=isNaN(t);return r!==s?r?1:-1:r?ii(e,t):0}function ii(e,t){return e===t?0:e>t?1:-1}function tc(e){return e.trim()}function qe(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var ts,oi,rc=c({"src/lib/responses/TagList.ts"(){"use strict";ts=class{constructor(e,t){this.all=e,this.latest=t}},oi=function(e,t=!1){let r=e.split(`
`).map(tc).filter(Boolean);t||r.sort(function(n,i){let a=n.split("."),o=i.split(".");if(a.length===1||o.length===1)return ec(qe(a[0]),qe(o[0]));for(let h=0,d=Math.max(a.length,o.length);h<d;h++){let p=ii(qe(a[h]),qe(o[h]));if(p)return p}return 0});let s=t?r[0]:[...r].reverse().find(n=>n.indexOf(".")>=0);return new ts(r,s)}}}),ai={};R(ai,{addAnnotatedTagTask:()=>ic,addTagTask:()=>nc,tagListTask:()=>sc});function sc(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return oi(r,t)}}}function nc(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function ic(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var oc=c({"src/lib/tasks/tag.ts"(){"use strict";rc()}}),ac=Co({"src/git.js"(e,t){"use strict";var{GitExecutor:r}=(ca(),S(Zs)),{SimpleGitApi:s}=(au(),S(In)),{Scheduler:n}=(uu(),S(Ln)),{configurationErrorTask:i}=(O(),S(At)),{asArray:a,filterArray:o,filterPrimitives:h,filterString:d,filterStringOrStringArray:p,filterType:l,getTrailingOptions:m,trailingFunctionArgument:f,trailingOptionsArgument:I}=(y(),S(Ts)),{applyPatchTask:x}=(lu(),S(jn)),{branchTask:L,branchLocalTask:X,deleteBranchesTask:ue,deleteBranchTask:lt}=(bu(),S(zn)),{checkIgnoreTask:ce}=(Cu(),S(Vn)),{checkIsRepoTask:fr}=(Os(),S(Cs)),{cloneTask:we,cloneMirrorTask:ft}=(Ou(),S(Yn)),{cleanWithOptionsTask:Me,isCleanOptionsArray:dt}=(js(),S(Ds)),{diffSummaryTask:mi}=(or(),S(pn)),{fetchTask:gi}=(Au(),S(Xn)),{moveTask:vi}=(Du(),S(Zn)),{pullTask:yi}=(ju(),S(ei)),{pushTagsTask:wi}=(Rn(),S(On)),{addRemoteTask:_i,getRemotesTask:bi,listRemotesTask:ki,remoteTask:Ti,removeRemoteTask:Ci}=(Vu(),S(ri)),{getResetMode:Si,resetTask:Ei}=(Qs(),S(Vs)),{stashListTask:Oi}=(Ku(),S(si)),{addSubModuleTask:Ri,initSubModuleTask:Fi,subModuleTask:xi,updateSubModuleTask:Pi}=(Zu(),S(ni)),{addAnnotatedTagTask:Ai,addTagTask:Mi,tagListTask:Ii}=(oc(),S(ai)),{straightThroughBufferTask:Li,straightThroughStringTask:V}=(O(),S(At));function v(u,g){this._plugins=g,this._executor=new r(u.baseDir,new n(u.maxConcurrentProcesses),g),this._trimmed=u.trimmed}(v.prototype=Object.create(s.prototype)).constructor=v,v.prototype.customBinary=function(u){return this._plugins.reconfigure("binary",u),this},v.prototype.env=function(u,g){return arguments.length===1&&typeof u=="object"?this._executor.env=u:(this._executor.env=this._executor.env||{})[u]=g,this},v.prototype.stashList=function(u){return this._runTask(Oi(I(arguments)||{},o(u)&&u||[]),f(arguments))};function dr(u,g,k,A){return typeof k!="string"?i(`git.${u}() requires a string 'repoPath'`):g(k,l(A,d),m(arguments))}v.prototype.clone=function(){return this._runTask(dr("clone",we,...arguments),f(arguments))},v.prototype.mirror=function(){return this._runTask(dr("mirror",ft,...arguments),f(arguments))},v.prototype.mv=function(u,g){return this._runTask(vi(u,g),f(arguments))},v.prototype.checkoutLatestTag=function(u){var g=this;return this.pull(function(){g.tags(function(k,A){g.checkout(A.latest,u)})})},v.prototype.pull=function(u,g,k,A){return this._runTask(yi(l(u,d),l(g,d),m(arguments)),f(arguments))},v.prototype.fetch=function(u,g){return this._runTask(gi(l(u,d),l(g,d),m(arguments)),f(arguments))},v.prototype.silent=function(u){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},v.prototype.tags=function(u,g){return this._runTask(Ii(m(arguments)),f(arguments))},v.prototype.rebase=function(){return this._runTask(V(["rebase",...m(arguments)]),f(arguments))},v.prototype.reset=function(u){return this._runTask(Ei(Si(u),m(arguments)),f(arguments))},v.prototype.revert=function(u){let g=f(arguments);return typeof u!="string"?this._runTask(i("Commit must be a string"),g):this._runTask(V(["revert",...m(arguments,0,!0),u]),g)},v.prototype.addTag=function(u){let g=typeof u=="string"?Mi(u):i("Git.addTag requires a tag name");return this._runTask(g,f(arguments))},v.prototype.addAnnotatedTag=function(u,g){return this._runTask(Ai(u,g),f(arguments))},v.prototype.deleteLocalBranch=function(u,g,k){return this._runTask(lt(u,typeof g=="boolean"?g:!1),f(arguments))},v.prototype.deleteLocalBranches=function(u,g,k){return this._runTask(ue(u,typeof g=="boolean"?g:!1),f(arguments))},v.prototype.branch=function(u,g){return this._runTask(L(m(arguments)),f(arguments))},v.prototype.branchLocal=function(u){return this._runTask(X(),f(arguments))},v.prototype.raw=function(u){let g=!Array.isArray(u),k=[].slice.call(g?arguments:u,0);for(let H=0;H<k.length&&g;H++)if(!h(k[H])){k.splice(H,k.length-H);break}k.push(...m(arguments,0,!0));var A=f(arguments);return k.length?this._runTask(V(k,this._trimmed),A):this._runTask(i("Raw: must supply one or more command to execute"),A)},v.prototype.submoduleAdd=function(u,g,k){return this._runTask(Ri(u,g),f(arguments))},v.prototype.submoduleUpdate=function(u,g){return this._runTask(Pi(m(arguments,!0)),f(arguments))},v.prototype.submoduleInit=function(u,g){return this._runTask(Fi(m(arguments,!0)),f(arguments))},v.prototype.subModule=function(u,g){return this._runTask(xi(m(arguments)),f(arguments))},v.prototype.listRemote=function(){return this._runTask(ki(m(arguments)),f(arguments))},v.prototype.addRemote=function(u,g,k){return this._runTask(_i(u,g,m(arguments)),f(arguments))},v.prototype.removeRemote=function(u,g){return this._runTask(Ci(u),f(arguments))},v.prototype.getRemotes=function(u,g){return this._runTask(bi(u===!0),f(arguments))},v.prototype.remote=function(u,g){return this._runTask(Ti(m(arguments)),f(arguments))},v.prototype.tag=function(u,g){let k=m(arguments);return k[0]!=="tag"&&k.unshift("tag"),this._runTask(V(k),f(arguments))},v.prototype.updateServerInfo=function(u){return this._runTask(V(["update-server-info"]),f(arguments))},v.prototype.pushTags=function(u,g){let k=wi({remote:l(u,d)},m(arguments));return this._runTask(k,f(arguments))},v.prototype.rm=function(u){return this._runTask(V(["rm","-f",...a(u)]),f(arguments))},v.prototype.rmKeepLocal=function(u){return this._runTask(V(["rm","--cached",...a(u)]),f(arguments))},v.prototype.catFile=function(u,g){return this._catFile("utf-8",arguments)},v.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},v.prototype._catFile=function(u,g){var k=f(g),A=["cat-file"],H=g[0];if(typeof H=="string")return this._runTask(i("Git.catFile: options must be supplied as an array of strings"),k);Array.isArray(H)&&A.push.apply(A,H);let pt=u==="buffer"?Li(A):V(A);return this._runTask(pt,k)},v.prototype.diff=function(u,g){let k=d(u)?i("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):V(["diff",...m(arguments)]);return this._runTask(k,f(arguments))},v.prototype.diffSummary=function(){return this._runTask(mi(m(arguments,1)),f(arguments))},v.prototype.applyPatch=function(u){let g=p(u)?x(a(u),m([].slice.call(arguments,1))):i("git.applyPatch requires one or more string patches as the first argument");return this._runTask(g,f(arguments))},v.prototype.revparse=function(){let u=["rev-parse",...m(arguments,!0)];return this._runTask(V(u,!0),f(arguments))},v.prototype.clean=function(u,g,k){let A=dt(u),H=A&&u.join("")||l(u,d)||"",pt=m([].slice.call(arguments,A?1:0));return this._runTask(Me(H,pt),f(arguments))},v.prototype.exec=function(u){let g={commands:[],format:"utf-8",parser(){typeof u=="function"&&u()}};return this._runTask(g)},v.prototype.clearQueue=function(){return this},v.prototype.checkIgnore=function(u,g){return this._runTask(ce(a(l(u,p,[]))),f(arguments))},v.prototype.checkIsRepo=function(u,g){return this._runTask(fr(l(u,d)),f(arguments))},t.exports=v}});Ee();re();var uc=class extends Z{constructor(e,t){super(void 0,t),this.config=e}};re();re();var J=class extends Z{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};ge();us();Os();js();Gs();qs();Hs();Qs();function cc(e){return e?[{type:"spawn.before",action(s,n){e.aborted&&n.kill(new J(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(s,n){function i(){n.kill(new J(void 0,"abort","Abort signal received"))}e.addEventListener("abort",i),n.spawned.on("close",()=>e.removeEventListener("abort",i))}}]:void 0}function lc(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function fc(e,t){if(lc(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new J(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function dc(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new J(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new J(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new J(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function pc({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(r,s){return r.forEach((n,i)=>{let a=i<r.length?r[i+1]:"";e||fc(n,a),t||dc(n,s.method)}),r}}}y();function hc(e){let t=Te(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}y();var rs=(0,he.deferred)().promise;function mc({onClose:e=!0,onExit:t=50}={}){function r(){let n=-1,i={close:(0,he.deferred)(),closeTimeout:(0,he.deferred)(),exit:(0,he.deferred)(),exitTimeout:(0,he.deferred)()},a=Promise.race([e===!1?rs:i.closeTimeout.promise,t===!1?rs:i.exitTimeout.promise]);return s(e,i.close,i.closeTimeout),s(t,i.exit,i.exitTimeout),{close(o){n=o,i.close.done()},exit(o){n=o,i.exit.done()},get exitCode(){return n},result:a}}function s(n,i,a){n!==!1&&(n===!0?i.promise:i.promise.then(()=>Ot(n))).then(a.done)}return{type:"spawn.after",action(n,i){return be(this,arguments,function*(a,{spawned:o,close:h}){var d,p;let l=r(),m=!0,f=()=>void(m=!1);(d=o.stdout)==null||d.on("data",f),(p=o.stderr)==null||p.on("data",f),o.on("error",f),o.on("close",I=>l.close(I)),o.on("exit",I=>l.exit(I));try{yield l.result,m&&(yield Ot(50)),h(l.exitCode)}catch(I){h(l.exitCode,I)}})}}}y();var gc="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",ss="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function vc(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function ns(e,t){if(e.length<1||e.length>2)throw new J(void 0,"binary",gc);if(e.some(vc))if(t)console.warn(ss);else throw new J(void 0,"binary",ss);let[s,n]=e;return{binary:s,prefix:n}}function yc(e,t=["git"],r=!1){let s=ns(K(t),r);e.on("binary",n=>{s=ns(K(n),r)}),e.append("spawn.binary",()=>s.binary),e.append("spawn.args",n=>s.prefix?[s.prefix,...n]:n)}re();function wc(e){return!!(e.exitCode&&e.stdErr.length)}function _c(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function bc(e=!1,t=wc,r=_c){return(s,n)=>!e&&s||!t(n)?s:r(n)}function is(e){return{type:"task.error",action(t,r){let s=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(s)?{error:new Z(void 0,s.toString("utf-8"))}:{error:s}}}}y();var kc=class{constructor(){this.plugins=new Set,this.events=new ui.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){let r=b(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){let t=[];return K(e).forEach(r=>r&&this.plugins.add(b(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let s=t,n=Object.freeze(Object.create(r));for(let i of this.plugins)i.type===e&&(s=i.action(s,n));return s}};y();function Tc(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(i,a){return r.includes(a.method)?hs(i,t):i}},{type:"spawn.after",action(i,a){var o;a.commands.includes(t)&&((o=a.spawned.stderr)==null||o.on("data",h=>{let d=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(h.toString("utf8"));d&&e({method:a.method,stage:Cc(d[1]),progress:T(d[2]),processed:T(d[3]),total:T(d[4])})}))}}]}function Cc(e){return String(e.toLowerCase().split(" ",1))||"unknown"}y();function Sc(e){let t=vs(e,["uid","gid"]);return{type:"spawn.options",action(r){return z(z({},t),r)}}}function Ec({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(s,n){var i,a;let o;function h(){o&&clearTimeout(o),o=setTimeout(p,e)}function d(){var l,m;(l=n.spawned.stdout)==null||l.off("data",h),(m=n.spawned.stderr)==null||m.off("data",h),n.spawned.off("exit",d),n.spawned.off("close",d),o&&clearTimeout(o)}function p(){d(),n.kill(new J(void 0,"timeout","block timeout reached"))}r&&((i=n.spawned.stdout)==null||i.on("data",h)),t&&((a=n.spawned.stderr)==null||a.on("data",h)),n.spawned.on("exit",d),n.spawned.on("close",d),h()}}}Ee();function Oc(){return{type:"spawn.args",action(e){let t=[],r;function s(n){(r=r||[]).push(...n)}for(let n=0;n<e.length;n++){let i=e[n];if(Ye(i)){s(Fr(i));continue}if(i==="--"){s(e.slice(n+1).flatMap(a=>Ye(a)&&Fr(a)||a));break}t.push(i)}return r?[...t,"--",...r.map(String)]:t}}}y();var Rc=ac();function Fc(e,t){var r;let s=new kc,n=bs(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!Ut(n.baseDir))throw new uc(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&s.add(hc(n.config)),s.add(pc(n.unsafe)),s.add(Oc()),s.add(mc(n.completion)),n.abort&&s.add(cc(n.abort)),n.progress&&s.add(Tc(n.progress)),n.timeout&&s.add(Ec(n.timeout)),n.spawnOptions&&s.add(Sc(n.spawnOptions)),s.add(is(bc(!0))),n.errors&&s.add(is(n.errors)),yc(s,n.binary,(r=n.unsafe)==null?void 0:r.allowUnsafeCustomBinary),new Rc(n,s)}ge();var ut=Fc;var fi=require("timers"),U,di="code-pusher.log",ve=!1;async function lr(){let e=w.workspace.workspaceFolders;return e?e[0].name:""}async function pi(){try{let e=await U.diff(["--name-only"]),t=await U.diff(["--shortstat"]),s=e.split(`
`).filter(Boolean).slice(0,3).map(n=>n.split("/").pop()).join(", ")||"Code update";if(t){let n=t.replace(/\n/g,"").trim();s+=` (${n})`}return s}catch{return"Code update"}}function Ae(e){return new Promise(t=>(0,fi.setTimeout)(t,e))}async function hi(){try{return!!(await U.status()).files.length}catch(e){return console.error(e),!1}}async function ct(e,t,r,s){let n=ye.join(e,di),a=`Date/Time: ${new Date().toLocaleString()}
Status: ${t}
Commit Message: ${r}
Files Changed:
${s||"No files changed"}
------------------------------------------------
`;W.default.appendFileSync(n,a,"utf8")}async function ci(e,t){let r=ye.join(e,di),n=`Date/Time: ${new Date().toLocaleString()}
Status: ${t}
------------------------------------------------
`;W.default.appendFileSync(r,n,"utf8")}async function li(e,t,r){try{await U.push(e,t),ci(r,"Success"),w.window.showInformationMessage("Code pushed successfully")}catch(s){ci(r,"Failed"),w.window.showErrorMessage(`Failed to push code: ${s}`),w.window.showInformationMessage("Current remote and branch are: "+e+" "+t,"please change them in settings and try again"),console.error(s)}}async function xc(e,t){try{let r=await pi(),s=await hi(),n=await U.diff(["--name-only"]);if(!s){w.window.showInformationMessage(`No changes to commit right now, will check again after ${e} ${e===1?"minute":"minutes"}`);return}await U.add("."),await U.commit(r),ct(t,"Success",r,n),w.window.showInformationMessage(`Code committed successfully with message: ${r}`)}catch(r){ct(t,"Failed","Failed to commit code",""),w.window.showErrorMessage(`Failed to commit code: ${r}`),console.error(r)}}async function Pc(e){try{let t=await pi(),r=await hi(),s=await U.diff(["--name-only"]);if(!r){w.window.showInformationMessage("No changes to commit right now");return}await U.add("."),await U.commit(t),ct(e,"Success",t,s),w.window.showInformationMessage(`Code committed successfully with message: ${t}`)}catch(t){ct(e,"Failed","Failed to commit code",""),w.window.showErrorMessage(`Failed to commit code: ${t}`),console.error(t)}}function Ac(e){console.log('Congratulations, your extension "code-pusher" is now active!');let t,r=.2,s=w.commands.registerCommand("codePusher.startCommittingCode",async()=>{let o=w.workspace.workspaceFolders?[...w.workspace.workspaceFolders]:void 0,h=await lr(),d=ye.join(process.env.HOME||process.env.USERPROFILE||process.env.PWD||"",".code-pusher",h),p=o?o[0].uri.fsPath:"",l=`${p}/.git`;if(!ve){if(w.window.showInformationMessage("Checking if there is a git repository present in the root directory or not...."),await Ae(2e3),!o){w.window.showErrorMessage("No workspace is opened");return}if(!W.default.existsSync(l)){w.window.showErrorMessage("No git repository found in the root directory");return}}ve=!0,W.default.existsSync(d)||W.default.mkdirSync(d),w.window.showInformationMessage("starting to commit ..."),await Ae(1e3),w.window.showInformationMessage(`saving logs to ${d}`),U=ut(p),r=w.workspace.getConfiguration().get("codePusher.timeGapInMinutes")||30,t=setInterval(async()=>{await xc(r,d)},r*60*1e3)});e.subscriptions.push(s);let n=w.commands.registerCommand("codePusher.stopCommittingCode",async()=>{let o=await w.window.showInputBox({placeHolder:"Do you want to push the code before stopping? (yes/no)"});if(o?.toLowerCase()==="yes"||o?.toLowerCase()==="y"){let h=w.workspace.getConfiguration().get("codePusher.remoteName")||"origin";if(!h){w.window.showErrorMessage("Please provide the upstream name");return}let d=w.workspace.getConfiguration().get("codePusher.branchName")||"master";if(!d){w.window.showErrorMessage("Please provide the branch name");return}await li(h,d,""),await Ae(2e3)}clearInterval(t),w.window.showInformationMessage("Code pushing stopped!")});e.subscriptions.push(n);let i=w.commands.registerCommand("codePusher.instantCommit",async()=>{let o=w.workspace.workspaceFolders?[...w.workspace.workspaceFolders]:void 0,h=await lr(),d=ye.join(process.env.HOME||process.env.USERPROFILE||process.env.PWD||"",".code-pusher",h),p=o?o[0].uri.fsPath:"",l=`${p}/.git`;if(!ve){if(w.window.showInformationMessage("Checking if there is a git repository present in the root directory or not...."),await Ae(2e3),!o){w.window.showErrorMessage("No workspace is opened");return}if(!W.default.existsSync(l)){w.window.showErrorMessage("No git repository found in the root directory");return}}ve=!0,W.default.existsSync(d)||W.default.mkdirSync(d),U=ut(p),await Pc(d)});e.subscriptions.push(i);let a=w.commands.registerCommand("codePusher.instantPush",async()=>{let o=w.workspace.workspaceFolders?[...w.workspace.workspaceFolders]:void 0,h=await lr(),d=ye.join(process.env.HOME||process.env.USERPROFILE||process.env.PWD||"",".code-pusher",h),p=o?o[0].uri.fsPath:"",l=`${p}/.git`;if(!ve){if(w.window.showInformationMessage("Checking if there is a git repository present in the root directory or not...."),await Ae(2e3),!o){w.window.showErrorMessage("No workspace is opened");return}if(!W.default.existsSync(l)){w.window.showErrorMessage("No git repository found in the root directory");return}}ve=!0,W.default.existsSync(d)||W.default.mkdirSync(d);let m=w.workspace.getConfiguration().get("codePusher.remoteName")||"origin";if(!m){w.window.showErrorMessage("Please provide the upstream name");return}let f=w.workspace.getConfiguration().get("codePusher.branchName")||"master";if(!f){w.window.showErrorMessage("Please provide the branch name");return}U=ut(p),await li(m,f,d)});e.subscriptions.push(a)}function Mc(){w.window.showInformationMessage("Auto Commit & Push Logger Deactivated!")}0&&(module.exports={activate,deactivate});
